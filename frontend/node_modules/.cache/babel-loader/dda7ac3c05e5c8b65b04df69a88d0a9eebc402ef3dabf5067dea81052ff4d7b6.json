{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dali_bnslh\\\\Desktop\\\\Final plat\\\\frontend\\\\src\\\\pages\\\\LiveSession.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { liveService } from '../services/liveService';\nimport io from 'socket.io-client';\nimport { Video, Mic, MicOff, VideoOff, Users, MessageCircle, Send, Calendar, Clock, ExternalLink, ArrowLeft, Phone, Settings } from 'lucide-react';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport toast from 'react-hot-toast';\nimport { format, isAfter, isBefore, addMinutes } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport './LiveSession.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveSession = () => {\n  _s();\n  var _session$enseignant, _session$enseignant2, _session$enseignant3, _session$enseignant3$, _session$enseignant4, _session$enseignant4$, _session$enseignant5, _session$enseignant6, _session$enregistreme;\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [session, setSession] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isJoined, setIsJoined] = useState(false);\n  const [socket, setSocket] = useState(null);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [participants, setParticipants] = useState([]);\n  const [sessionStatus, setSessionStatus] = useState('upcoming');\n  useEffect(() => {\n    loadSession();\n\n    // Cleanup socket on unmount\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [id]);\n  useEffect(() => {\n    if (session) {\n      updateSessionStatus();\n      const interval = setInterval(updateSessionStatus, 60000); // Check every minute\n      return () => clearInterval(interval);\n    }\n  }, [session]);\n  const loadSession = async () => {\n    try {\n      const response = await liveService.getLiveSession(id);\n      setSession(response.session);\n      setParticipants(response.session.participants || []);\n      setChatMessages(response.session.chat || []);\n    } catch (error) {\n      console.error('Erreur chargement session:', error);\n      toast.error('Impossible de charger la session');\n      navigate('/live-sessions');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateSessionStatus = () => {\n    if (!session) return;\n    const now = new Date();\n    const sessionDate = new Date(session.dateHeure);\n    const sessionEnd = addMinutes(sessionDate, session.dureeEstimee);\n    if (session.status === 'annule') {\n      setSessionStatus('cancelled');\n    } else if (session.status === 'termine') {\n      setSessionStatus('ended');\n    } else if (isBefore(now, sessionDate)) {\n      setSessionStatus('upcoming');\n    } else if (isAfter(now, sessionDate) && isBefore(now, sessionEnd)) {\n      setSessionStatus('live');\n    } else {\n      setSessionStatus('ended');\n    }\n  };\n  const initializeSocket = () => {\n    const socketInstance = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000');\n    socketInstance.on('connect', () => {\n      console.log('Connecté au socket');\n      socketInstance.emit('join-live-session', id);\n    });\n    socketInstance.on('new-chat-message', message => {\n      setChatMessages(prev => [...prev, message]);\n    });\n    socketInstance.on('participant-joined', participant => {\n      setParticipants(prev => [...prev, participant]);\n    });\n    socketInstance.on('participant-left', participantId => {\n      setParticipants(prev => prev.filter(p => p._id !== participantId));\n    });\n    setSocket(socketInstance);\n  };\n  const handleJoinSession = async () => {\n    try {\n      if (sessionStatus === 'upcoming') {\n        // Just register for the session\n        await liveService.joinLiveSession(id);\n        toast.success('Inscription à la session réussie !');\n        loadSession(); // Refresh session data\n      } else if (sessionStatus === 'live') {\n        // Join the live session\n        await liveService.joinLiveSession(id);\n        setIsJoined(true);\n        initializeSocket();\n        toast.success('Vous avez rejoint la session live !');\n      }\n    } catch (error) {\n      console.error('Erreur rejoindre session:', error);\n      toast.error('Erreur lors de la connexion à la session');\n    }\n  };\n  const handleLeaveSession = () => {\n    if (socket) {\n      socket.emit('leave-live-session', id);\n      socket.disconnect();\n    }\n    setIsJoined(false);\n    toast.info('Vous avez quitté la session');\n  };\n  const handleSendMessage = e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !socket) return;\n    const messageData = {\n      sessionId: id,\n      message: newMessage.trim(),\n      userName: `${user.prenom} ${user.nom}`\n    };\n    socket.emit('live-chat-message', messageData);\n    setNewMessage('');\n  };\n  const handleStartSession = async () => {\n    if (user.role !== 'enseignant' && user.role !== 'admin') {\n      toast.error('Seuls les enseignants peuvent démarrer une session');\n      return;\n    }\n    try {\n      await liveService.startLiveSession(id);\n      toast.success('Session démarrée !');\n      loadSession();\n    } catch (error) {\n      console.error('Erreur démarrage session:', error);\n      toast.error('Erreur lors du démarrage de la session');\n    }\n  };\n  const handleEndSession = async () => {\n    if (user.role !== 'enseignant' && user.role !== 'admin') {\n      toast.error('Seuls les enseignants peuvent terminer une session');\n      return;\n    }\n    if (!window.confirm('Êtes-vous sûr de vouloir terminer cette session ?')) {\n      return;\n    }\n    try {\n      await liveService.endLiveSession(id);\n      toast.success('Session terminée !');\n      loadSession();\n    } catch (error) {\n      console.error('Erreur fin session:', error);\n      toast.error('Erreur lors de la fin de la session');\n    }\n  };\n  const getStatusLabel = () => {\n    switch (sessionStatus) {\n      case 'upcoming':\n        return 'À venir';\n      case 'live':\n        return 'En direct';\n      case 'ended':\n        return 'Terminée';\n      case 'cancelled':\n        return 'Annulée';\n      default:\n        return 'Inconnue';\n    }\n  };\n  const getStatusClass = () => {\n    switch (sessionStatus) {\n      case 'upcoming':\n        return 'upcoming';\n      case 'live':\n        return 'live';\n      case 'ended':\n        return 'ended';\n      case 'cancelled':\n        return 'cancelled';\n      default:\n        return 'unknown';\n    }\n  };\n  const isTeacher = (user === null || user === void 0 ? void 0 : user.role) === 'enseignant' || (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  const isSessionOwner = (session === null || session === void 0 ? void 0 : (_session$enseignant = session.enseignant) === null || _session$enseignant === void 0 ? void 0 : _session$enseignant._id) === (user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: \"Chargement de la session...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 12\n    }, this);\n  }\n  if (!session) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"session-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Session non trouv\\xE9e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"La session que vous recherchez n'existe pas ou n'est plus disponible.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"live-session-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"session-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/live-sessions'),\n          className: \"back-button\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), \"Retour aux sessions\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"session-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"session-status-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: session.titre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-badge ${getStatusClass()}`,\n              children: getStatusLabel()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), session.description && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"session-description\",\n            children: session.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"session-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meta-item\",\n              children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: format(new Date(session.dateHeure), 'EEEE d MMMM yyyy à HH:mm', {\n                  locale: fr\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meta-item\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [session.dureeEstimee, \" minutes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meta-item\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [participants.length, \" participants\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"session-teacher\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"teacher-avatar\",\n              children: (_session$enseignant2 = session.enseignant) !== null && _session$enseignant2 !== void 0 && _session$enseignant2.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: session.enseignant.avatar,\n                alt: session.enseignant.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [(_session$enseignant3 = session.enseignant) === null || _session$enseignant3 === void 0 ? void 0 : (_session$enseignant3$ = _session$enseignant3.nom) === null || _session$enseignant3$ === void 0 ? void 0 : _session$enseignant3$.charAt(0), (_session$enseignant4 = session.enseignant) === null || _session$enseignant4 === void 0 ? void 0 : (_session$enseignant4$ = _session$enseignant4.prenom) === null || _session$enseignant4$ === void 0 ? void 0 : _session$enseignant4$.charAt(0)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Enseignant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"teacher-name\",\n                children: [(_session$enseignant5 = session.enseignant) === null || _session$enseignant5 === void 0 ? void 0 : _session$enseignant5.nom, \" \", (_session$enseignant6 = session.enseignant) === null || _session$enseignant6 === void 0 ? void 0 : _session$enseignant6.prenom]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"session-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"meeting-area\",\n          children: !isJoined ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meeting-preview\",\n            children: [sessionStatus === 'upcoming' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"preview-content\",\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 64\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Session programm\\xE9e\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"La session commencera le \", format(new Date(session.dateHeure), 'd MMMM à HH:mm', {\n                  locale: fr\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 21\n              }, this), isSessionOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"teacher-controls\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleStartSession,\n                  className: \"btn btn-primary\",\n                  children: [/*#__PURE__*/_jsxDEV(Video, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 27\n                  }, this), \"D\\xE9marrer la session\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleJoinSession,\n                className: \"btn btn-outline\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this), \"S'inscrire \\xE0 la session\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this), sessionStatus === 'live' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"preview-content\",\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 64\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Session en cours\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Rejoignez la session maintenant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"join-options\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleJoinSession,\n                  className: \"btn btn-primary btn-lg\",\n                  children: [/*#__PURE__*/_jsxDEV(Video, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 25\n                  }, this), \"Rejoindre la session\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 23\n                }, this), session.urlMeeting && /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: session.urlMeeting,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"btn btn-outline\",\n                  children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 27\n                  }, this), \"Ouvrir dans une nouvelle fen\\xEAtre\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this), sessionStatus === 'ended' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"preview-content\",\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 64\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Session termin\\xE9e\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Cette session s'est termin\\xE9e le \", format(new Date(session.dateHeure), 'd MMMM à HH:mm', {\n                  locale: fr\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 21\n              }, this), ((_session$enregistreme = session.enregistrement) === null || _session$enregistreme === void 0 ? void 0 : _session$enregistreme.disponible) && /*#__PURE__*/_jsxDEV(\"a\", {\n                href: session.enregistrement.url,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"btn btn-outline\",\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 25\n                }, this), \"Voir l'enregistrement\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this), sessionStatus === 'cancelled' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"preview-content cancelled\",\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 64\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Session annul\\xE9e\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Cette session a \\xE9t\\xE9 annul\\xE9e\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meeting-active\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-container\",\n              children: session.urlMeeting ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n                src: session.urlMeeting,\n                title: \"Session Live\",\n                className: \"meeting-iframe\",\n                allow: \"camera; microphone; display-capture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"video-placeholder\",\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 48\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Connexion \\xE0 la session...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meeting-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"control-btn\",\n                  children: /*#__PURE__*/_jsxDEV(Mic, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"control-btn\",\n                  children: /*#__PURE__*/_jsxDEV(Video, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"control-btn settings\",\n                  children: /*#__PURE__*/_jsxDEV(Settings, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 406,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"session-actions\",\n                children: [isSessionOwner && sessionStatus === 'live' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleEndSession,\n                  className: \"btn btn-danger\",\n                  children: [/*#__PURE__*/_jsxDEV(Phone, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 25\n                  }, this), \"Terminer la session\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleLeaveSession,\n                  className: \"btn btn-outline\",\n                  children: \"Quitter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"session-sidebar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 17\n              }, this), \"Participants (\", participants.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"participants-list\",\n              children: participants.map((participant, index) => {\n                var _participant$user, _participant$user2, _participant$user2$no, _participant$user3, _participant$user3$pr, _participant$user4, _participant$user5, _participant$user6, _session$enseignant7;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"participant-item\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"participant-avatar\",\n                    children: (_participant$user = participant.user) !== null && _participant$user !== void 0 && _participant$user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: participant.user.avatar,\n                      alt: participant.user.nom\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 25\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [(_participant$user2 = participant.user) === null || _participant$user2 === void 0 ? void 0 : (_participant$user2$no = _participant$user2.nom) === null || _participant$user2$no === void 0 ? void 0 : _participant$user2$no.charAt(0), (_participant$user3 = participant.user) === null || _participant$user3 === void 0 ? void 0 : (_participant$user3$pr = _participant$user3.prenom) === null || _participant$user3$pr === void 0 ? void 0 : _participant$user3$pr.charAt(0)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"participant-name\",\n                    children: [(_participant$user4 = participant.user) === null || _participant$user4 === void 0 ? void 0 : _participant$user4.nom, \" \", (_participant$user5 = participant.user) === null || _participant$user5 === void 0 ? void 0 : _participant$user5.prenom, ((_participant$user6 = participant.user) === null || _participant$user6 === void 0 ? void 0 : _participant$user6._id) === ((_session$enseignant7 = session.enseignant) === null || _session$enseignant7 === void 0 ? void 0 : _session$enseignant7._id) && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"teacher-badge\",\n                      children: \"Enseignant\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 21\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 19\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar-section chat-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this), \"Chat\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-messages\",\n              children: chatMessages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"message-author\",\n                    children: message.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"message-time\",\n                    children: format(new Date(message.timestamp), 'HH:mm')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"message-content\",\n                  children: message.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), isJoined && sessionStatus === 'live' && /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSendMessage,\n              className: \"chat-input-form\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chat-input-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  placeholder: \"Tapez votre message...\",\n                  className: \"chat-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"send-button\",\n                  children: /*#__PURE__*/_jsxDEV(Send, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this), session.materiel && session.materiel.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Mat\\xE9riel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"materials-list\",\n              children: session.materiel.map((material, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n                href: material.url,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"material-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: material.titre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(ExternalLink, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveSession, \"JY/VP7Svqc/Xq7Eo1zuDgRSEwzc=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = LiveSession;\nexport default LiveSession;\nvar _c;\n$RefreshReg$(_c, \"LiveSession\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","liveService","io","Video","Mic","MicOff","VideoOff","Users","MessageCircle","Send","Calendar","Clock","ExternalLink","ArrowLeft","Phone","Settings","LoadingSpinner","toast","format","isAfter","isBefore","addMinutes","fr","jsxDEV","_jsxDEV","LiveSession","_s","_session$enseignant","_session$enseignant2","_session$enseignant3","_session$enseignant3$","_session$enseignant4","_session$enseignant4$","_session$enseignant5","_session$enseignant6","_session$enregistreme","id","user","navigate","session","setSession","loading","setLoading","isJoined","setIsJoined","socket","setSocket","chatMessages","setChatMessages","newMessage","setNewMessage","participants","setParticipants","sessionStatus","setSessionStatus","loadSession","disconnect","updateSessionStatus","interval","setInterval","clearInterval","response","getLiveSession","chat","error","console","now","Date","sessionDate","dateHeure","sessionEnd","dureeEstimee","status","initializeSocket","socketInstance","process","env","REACT_APP_SOCKET_URL","on","log","emit","message","prev","participant","participantId","filter","p","_id","handleJoinSession","joinLiveSession","success","handleLeaveSession","info","handleSendMessage","e","preventDefault","trim","messageData","sessionId","userName","prenom","nom","handleStartSession","role","startLiveSession","handleEndSession","window","confirm","endLiveSession","getStatusLabel","getStatusClass","isTeacher","isSessionOwner","enseignant","text","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","size","titre","description","locale","length","avatar","src","alt","charAt","urlMeeting","href","target","rel","enregistrement","disponible","url","title","allow","map","index","_participant$user","_participant$user2","_participant$user2$no","_participant$user3","_participant$user3$pr","_participant$user4","_participant$user5","_participant$user6","_session$enseignant7","timestamp","onSubmit","type","value","onChange","placeholder","materiel","material","_c","$RefreshReg$"],"sources":["C:/Users/Dali_bnslh/Desktop/Final plat/frontend/src/pages/LiveSession.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { liveService } from '../services/liveService';\r\nimport io from 'socket.io-client';\r\nimport {\r\n  Video,\r\n  Mic,\r\n  MicOff,\r\n  VideoOff,\r\n  Users,\r\n  MessageCircle,\r\n  Send,\r\n  Calendar,\r\n  Clock,\r\n  ExternalLink,\r\n  ArrowLeft,\r\n  Phone,\r\n  Settings\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport toast from 'react-hot-toast';\r\nimport { format, isAfter, isBefore, addMinutes } from 'date-fns';\r\nimport { fr } from 'date-fns/locale';\r\nimport './LiveSession.css';\r\n\r\nconst LiveSession = () => {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  \r\n  const [session, setSession] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isJoined, setIsJoined] = useState(false);\r\n  const [socket, setSocket] = useState(null);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [participants, setParticipants] = useState([]);\r\n  const [sessionStatus, setSessionStatus] = useState('upcoming');\r\n\r\n  useEffect(() => {\r\n    loadSession();\r\n    \r\n    // Cleanup socket on unmount\r\n    return () => {\r\n      if (socket) {\r\n        socket.disconnect();\r\n      }\r\n    };\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    if (session) {\r\n      updateSessionStatus();\r\n      const interval = setInterval(updateSessionStatus, 60000); // Check every minute\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [session]);\r\n\r\n  const loadSession = async () => {\r\n    try {\r\n      const response = await liveService.getLiveSession(id);\r\n      setSession(response.session);\r\n      setParticipants(response.session.participants || []);\r\n      setChatMessages(response.session.chat || []);\r\n    } catch (error) {\r\n      console.error('Erreur chargement session:', error);\r\n      toast.error('Impossible de charger la session');\r\n      navigate('/live-sessions');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateSessionStatus = () => {\r\n    if (!session) return;\r\n\r\n    const now = new Date();\r\n    const sessionDate = new Date(session.dateHeure);\r\n    const sessionEnd = addMinutes(sessionDate, session.dureeEstimee);\r\n\r\n    if (session.status === 'annule') {\r\n      setSessionStatus('cancelled');\r\n    } else if (session.status === 'termine') {\r\n      setSessionStatus('ended');\r\n    } else if (isBefore(now, sessionDate)) {\r\n      setSessionStatus('upcoming');\r\n    } else if (isAfter(now, sessionDate) && isBefore(now, sessionEnd)) {\r\n      setSessionStatus('live');\r\n    } else {\r\n      setSessionStatus('ended');\r\n    }\r\n  };\r\n\r\n  const initializeSocket = () => {\r\n    const socketInstance = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000');\r\n    \r\n    socketInstance.on('connect', () => {\r\n      console.log('Connecté au socket');\r\n      socketInstance.emit('join-live-session', id);\r\n    });\r\n\r\n    socketInstance.on('new-chat-message', (message) => {\r\n      setChatMessages(prev => [...prev, message]);\r\n    });\r\n\r\n    socketInstance.on('participant-joined', (participant) => {\r\n      setParticipants(prev => [...prev, participant]);\r\n    });\r\n\r\n    socketInstance.on('participant-left', (participantId) => {\r\n      setParticipants(prev => prev.filter(p => p._id !== participantId));\r\n    });\r\n\r\n    setSocket(socketInstance);\r\n  };\r\n\r\n  const handleJoinSession = async () => {\r\n    try {\r\n      if (sessionStatus === 'upcoming') {\r\n        // Just register for the session\r\n        await liveService.joinLiveSession(id);\r\n        toast.success('Inscription à la session réussie !');\r\n        loadSession(); // Refresh session data\r\n      } else if (sessionStatus === 'live') {\r\n        // Join the live session\r\n        await liveService.joinLiveSession(id);\r\n        setIsJoined(true);\r\n        initializeSocket();\r\n        toast.success('Vous avez rejoint la session live !');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur rejoindre session:', error);\r\n      toast.error('Erreur lors de la connexion à la session');\r\n    }\r\n  };\r\n\r\n  const handleLeaveSession = () => {\r\n    if (socket) {\r\n      socket.emit('leave-live-session', id);\r\n      socket.disconnect();\r\n    }\r\n    setIsJoined(false);\r\n    toast.info('Vous avez quitté la session');\r\n  };\r\n\r\n  const handleSendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || !socket) return;\r\n\r\n    const messageData = {\r\n      sessionId: id,\r\n      message: newMessage.trim(),\r\n      userName: `${user.prenom} ${user.nom}`\r\n    };\r\n\r\n    socket.emit('live-chat-message', messageData);\r\n    setNewMessage('');\r\n  };\r\n\r\n  const handleStartSession = async () => {\r\n    if (user.role !== 'enseignant' && user.role !== 'admin') {\r\n      toast.error('Seuls les enseignants peuvent démarrer une session');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await liveService.startLiveSession(id);\r\n      toast.success('Session démarrée !');\r\n      loadSession();\r\n    } catch (error) {\r\n      console.error('Erreur démarrage session:', error);\r\n      toast.error('Erreur lors du démarrage de la session');\r\n    }\r\n  };\r\n\r\n  const handleEndSession = async () => {\r\n    if (user.role !== 'enseignant' && user.role !== 'admin') {\r\n      toast.error('Seuls les enseignants peuvent terminer une session');\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm('Êtes-vous sûr de vouloir terminer cette session ?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await liveService.endLiveSession(id);\r\n      toast.success('Session terminée !');\r\n      loadSession();\r\n    } catch (error) {\r\n      console.error('Erreur fin session:', error);\r\n      toast.error('Erreur lors de la fin de la session');\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = () => {\r\n    switch (sessionStatus) {\r\n      case 'upcoming': return 'À venir';\r\n      case 'live': return 'En direct';\r\n      case 'ended': return 'Terminée';\r\n      case 'cancelled': return 'Annulée';\r\n      default: return 'Inconnue';\r\n    }\r\n  };\r\n\r\n  const getStatusClass = () => {\r\n    switch (sessionStatus) {\r\n      case 'upcoming': return 'upcoming';\r\n      case 'live': return 'live';\r\n      case 'ended': return 'ended';\r\n      case 'cancelled': return 'cancelled';\r\n      default: return 'unknown';\r\n    }\r\n  };\r\n\r\n  const isTeacher = user?.role === 'enseignant' || user?.role === 'admin';\r\n  const isSessionOwner = session?.enseignant?._id === user?._id || user?.role === 'admin';\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner text=\"Chargement de la session...\" />;\r\n  }\r\n\r\n  if (!session) {\r\n    return (\r\n      <div className=\"session-error\">\r\n        <h2>Session non trouvée</h2>\r\n        <p>La session que vous recherchez n'existe pas ou n'est plus disponible.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"live-session-page\">\r\n      <div className=\"container\">\r\n        {/* Header */}\r\n        <div className=\"session-header\">\r\n          <button \r\n            onClick={() => navigate('/live-sessions')} \r\n            className=\"back-button\"\r\n          >\r\n            <ArrowLeft size={16} />\r\n            Retour aux sessions\r\n          </button>\r\n\r\n          <div className=\"session-info\">\r\n            <div className=\"session-status-header\">\r\n              <h1>{session.titre}</h1>\r\n              <span className={`status-badge ${getStatusClass()}`}>\r\n                {getStatusLabel()}\r\n              </span>\r\n            </div>\r\n            \r\n            {session.description && (\r\n              <p className=\"session-description\">{session.description}</p>\r\n            )}\r\n\r\n            <div className=\"session-meta\">\r\n              <div className=\"meta-item\">\r\n                <Calendar size={16} />\r\n                <span>\r\n                  {format(new Date(session.dateHeure), 'EEEE d MMMM yyyy à HH:mm', { locale: fr })}\r\n                </span>\r\n              </div>\r\n              <div className=\"meta-item\">\r\n                <Clock size={16} />\r\n                <span>{session.dureeEstimee} minutes</span>\r\n              </div>\r\n              <div className=\"meta-item\">\r\n                <Users size={16} />\r\n                <span>{participants.length} participants</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"session-teacher\">\r\n              <div className=\"teacher-avatar\">\r\n                {session.enseignant?.avatar ? (\r\n                  <img src={session.enseignant.avatar} alt={session.enseignant.nom} />\r\n                ) : (\r\n                  <span>\r\n                    {session.enseignant?.nom?.charAt(0)}\r\n                    {session.enseignant?.prenom?.charAt(0)}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <p>Enseignant</p>\r\n                <p className=\"teacher-name\">\r\n                  {session.enseignant?.nom} {session.enseignant?.prenom}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <div className=\"session-content\">\r\n          {/* Video/Meeting Area */}\r\n          <div className=\"meeting-area\">\r\n            {!isJoined ? (\r\n              <div className=\"meeting-preview\">\r\n                {sessionStatus === 'upcoming' && (\r\n                  <div className=\"preview-content\">\r\n                    <Video size={64} />\r\n                    <h3>Session programmée</h3>\r\n                    <p>La session commencera le {format(new Date(session.dateHeure), 'd MMMM à HH:mm', { locale: fr })}</p>\r\n                    \r\n                    {isSessionOwner && (\r\n                      <div className=\"teacher-controls\">\r\n                        <button onClick={handleStartSession} className=\"btn btn-primary\">\r\n                          <Video size={16} />\r\n                          Démarrer la session\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <button onClick={handleJoinSession} className=\"btn btn-outline\">\r\n                      <Users size={16} />\r\n                      S'inscrire à la session\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {sessionStatus === 'live' && (\r\n                  <div className=\"preview-content\">\r\n                    <Video size={64} />\r\n                    <h3>Session en cours</h3>\r\n                    <p>Rejoignez la session maintenant</p>\r\n                    \r\n                    <div className=\"join-options\">\r\n                      <button onClick={handleJoinSession} className=\"btn btn-primary btn-lg\">\r\n                        <Video size={20} />\r\n                        Rejoindre la session\r\n                      </button>\r\n                      \r\n                      {session.urlMeeting && (\r\n                        <a \r\n                          href={session.urlMeeting}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"btn btn-outline\"\r\n                        >\r\n                          <ExternalLink size={16} />\r\n                          Ouvrir dans une nouvelle fenêtre\r\n                        </a>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {sessionStatus === 'ended' && (\r\n                  <div className=\"preview-content\">\r\n                    <Video size={64} />\r\n                    <h3>Session terminée</h3>\r\n                    <p>Cette session s'est terminée le {format(new Date(session.dateHeure), 'd MMMM à HH:mm', { locale: fr })}</p>\r\n                    \r\n                    {session.enregistrement?.disponible && (\r\n                      <a \r\n                        href={session.enregistrement.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"btn btn-outline\"\r\n                      >\r\n                        <Video size={16} />\r\n                        Voir l'enregistrement\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {sessionStatus === 'cancelled' && (\r\n                  <div className=\"preview-content cancelled\">\r\n                    <Video size={64} />\r\n                    <h3>Session annulée</h3>\r\n                    <p>Cette session a été annulée</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"meeting-active\">\r\n                <div className=\"video-container\">\r\n                  {session.urlMeeting ? (\r\n                    <iframe\r\n                      src={session.urlMeeting}\r\n                      title=\"Session Live\"\r\n                      className=\"meeting-iframe\"\r\n                      allow=\"camera; microphone; display-capture\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"video-placeholder\">\r\n                      <Video size={48} />\r\n                      <p>Connexion à la session...</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"meeting-controls\">\r\n                  <div className=\"control-buttons\">\r\n                    <button className=\"control-btn\">\r\n                      <Mic size={20} />\r\n                    </button>\r\n                    <button className=\"control-btn\">\r\n                      <Video size={20} />\r\n                    </button>\r\n                    <button className=\"control-btn settings\">\r\n                      <Settings size={20} />\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"session-actions\">\r\n                    {isSessionOwner && sessionStatus === 'live' && (\r\n                      <button onClick={handleEndSession} className=\"btn btn-danger\">\r\n                        <Phone size={16} />\r\n                        Terminer la session\r\n                      </button>\r\n                    )}\r\n                    \r\n                    <button onClick={handleLeaveSession} className=\"btn btn-outline\">\r\n                      Quitter\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"session-sidebar\">\r\n            {/* Participants */}\r\n            <div className=\"sidebar-section\">\r\n              <h3>\r\n                <Users size={16} />\r\n                Participants ({participants.length})\r\n              </h3>\r\n              <div className=\"participants-list\">\r\n                {participants.map((participant, index) => (\r\n                  <div key={index} className=\"participant-item\">\r\n                    <div className=\"participant-avatar\">\r\n                      {participant.user?.avatar ? (\r\n                        <img src={participant.user.avatar} alt={participant.user.nom} />\r\n                      ) : (\r\n                        <span>\r\n                          {participant.user?.nom?.charAt(0)}\r\n                          {participant.user?.prenom?.charAt(0)}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <span className=\"participant-name\">\r\n                      {participant.user?.nom} {participant.user?.prenom}\r\n                      {participant.user?._id === session.enseignant?._id && (\r\n                        <span className=\"teacher-badge\">Enseignant</span>\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Chat */}\r\n            <div className=\"sidebar-section chat-section\">\r\n              <h3>\r\n                <MessageCircle size={16} />\r\n                Chat\r\n              </h3>\r\n              \r\n              <div className=\"chat-messages\">\r\n                {chatMessages.map((message, index) => (\r\n                  <div key={index} className=\"chat-message\">\r\n                    <div className=\"message-header\">\r\n                      <span className=\"message-author\">{message.userName}</span>\r\n                      <span className=\"message-time\">\r\n                        {format(new Date(message.timestamp), 'HH:mm')}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"message-content\">{message.message}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {isJoined && sessionStatus === 'live' && (\r\n                <form onSubmit={handleSendMessage} className=\"chat-input-form\">\r\n                  <div className=\"chat-input-container\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newMessage}\r\n                      onChange={(e) => setNewMessage(e.target.value)}\r\n                      placeholder=\"Tapez votre message...\"\r\n                      className=\"chat-input\"\r\n                    />\r\n                    <button type=\"submit\" className=\"send-button\">\r\n                      <Send size={16} />\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              )}\r\n            </div>\r\n\r\n            {/* Materials */}\r\n            {session.materiel && session.materiel.length > 0 && (\r\n              <div className=\"sidebar-section\">\r\n                <h3>Matériel</h3>\r\n                <div className=\"materials-list\">\r\n                  {session.materiel.map((material, index) => (\r\n                    <a\r\n                      key={index}\r\n                      href={material.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"material-item\"\r\n                    >\r\n                      <span>{material.titre}</span>\r\n                      <ExternalLink size={14} />\r\n                    </a>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveSession;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}